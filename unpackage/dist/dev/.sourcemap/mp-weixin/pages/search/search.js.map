{"version":3,"sources":["uni-app:///main.js","webpack:///E:/project/wechat-mini-program/pages/search/search.vue?625b","webpack:///E:/project/wechat-mini-program/pages/search/search.vue?6a25","webpack:///E:/project/wechat-mini-program/pages/search/search.vue?4fd9","webpack:///E:/project/wechat-mini-program/pages/search/search.vue?b05e","uni-app:///pages/search/search.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,+F;AACAA,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;;;AAGrD;AACmM;AACnM,gBAAgB,wMAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAsvB,CAAgB,uvBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgC1wB;;;AAGA,gH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8mBACA,gEACA,c,CAAA;eACA,EACA,cACA,qBADA,EAEA,uBAFA,CAGA;AAHA,GADA,EAMA,IANA,kBAMA,CACA,SACA,SADA,EAEA,uBAFA,EAGA,eAHA,EAGA;AACA,yBAJA,EAKA,cALA,EAKA;AACA,sBANA,EAMA;AACA,wBAPA,EAQA,SARA,GAUA,CAjBA,EAkBA,MAlBA,oBAkBA,CACA,mDACA,oBACA,8BACA,sBACA,CACA,iCACA,CAzBA,EA0BA,WACA;AACA,YAFA,oBAEA,KAFA,EAEA,kBACA,mBACA,sCAFA,CAEA;AACA,0DACA,sBACA,sBACA,OACA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,EAGA,MAHA;AAIA,KAhBA;AAiBA;AACA,cAlBA,wBAkBA;AACA;AACA;AACA;AACA,KAtBA;AAuBA;AACA,iBAxBA,yBAwBA,KAxBA,EAwBA;AACA;AACA,oBADA;AAEA,UAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAdA;AAeA,KAxCA;AAyCA;AACA,gBA1CA,0BA0CA;AACA;AACA,iBADA;AAEA,2BAFA;AAGA,UAHA,CAGA;AACA;AACA;AACA;AACA;AACA,+BADA;;AAGA,OAVA,EAUA,KAVA,CAUA;AACA;AACA,OAZA;AAaA,KAxDA;AAyDA;AACA,YA1DA,oBA0DA,IA1DA,EA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,mCAFA;;AAIA;AACA,KAtEA,EA1BA,E","file":"pages/search/search.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/search/search.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./search.vue?vue&type=template&id=4cedc0c6&\"\nvar renderjs\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/search/search.vue\"\nexport default component.exports","export * from \"-!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search.vue?vue&type=template&id=4cedc0c6&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\下载\\\\HBuilderX.2.6.0.20200223\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<view class=\"head\">\r\n\t\t\t<!-- 搜索框 -->\r\n\t\t\t<input :value=\"value\" :placeholder='placeholder' placeholder-class=\"placeholder-class\" selection-start=\"20\" @change=\"onChange\" @input=\"onChange\" @click=\"clickInput\" class=\"input\"/>\r\n\t\t\t<navigator class=\"cancel\" open-type=\"navigateBack\">取消</navigator>\r\n\t\t</view>\r\n\t\t<!-- 历史搜索 -->\r\n\t\t<view v-if=\"isHistory\" class=\"history\">\r\n\t\t\t<view class=\"history-title\">\r\n\t\t\t\t<view class=\"title-left\">历史搜索</view>\r\n\t\t\t\t<image src=\"../../static/delete-logo.png\" @tap=\"clearHistory\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"history-group\">\r\n\t\t\t\t<view v-for=\"(item,index) in history_search\" :key='index' class=\"group-name\">\r\n\t\t\t\t\t{{item}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 搜索列表 -->\r\n\t\t<view class=\"list\" v-if=\"isSearchList\">\r\n\t\t\t<view class=\"list-group\" v-for=\"item in search_list\" :key=\"item.goods_id\" @tap=\"goDetail(item)\">\r\n\t\t\t\t{{item.goods_name}}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 搜索为空提示 -->\r\n\t\t<van-empty image=\"search\" class=\"search\" description=\"暂无商品\" v-if=\"isEmpty\"/>\r\n\t\t<van-dialog id=\"van-dialog\" />\r\n\t</view>\n</template>\n\n<script>\r\n\timport './search.css'\r\n\timport vanEmpty from '../../wxcomponents/vant/dist/empty/index'\r\n\timport vanDialog from '../../wxcomponents/vant/dist/dialog/index'\r\n\timport Dialog from '../../wxcomponents/vant/dist/dialog/dialog'\r\n\tconst api = require('../../utils/request.js')\r\n\tconst time = -1 //定时器\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\t'van-empty':vanEmpty,\r\n\t\t\t'van-dialog':vanDialog,\r\n\t\t\t// Dialog\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tvalue:'',\r\n\t\t\t\tplaceholder:'请输入关键词搜索',\r\n\t\t\t\tsearch_list:[],//商品列表\r\n\t\t\t\tisSearchList:false,\r\n\t\t\t\tisEmpty:false,//搜索为空\r\n\t\t\t\tisHistory:false,//历史搜索\r\n\t\t\t\thistory_search:[],\r\n\t\t\t\tquery:'',\n\t\t\t}\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tvar history = uni.getStorageSync('history_search')\r\n\t\t\tif(history != ''){\r\n\t\t\t\tthis.history_search = history\r\n\t\t\t\tthis.isHistory = true\r\n\t\t\t}\r\n\t\t\tconsole.log(this.history_search)\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//输入事件\r\n\t\t\tonChange(event){\r\n\t\t\t\tconsole.log(event)\r\n\t\t\t\tlet query = event.detail.value.trim() //去除多余空格\r\n\t\t\t\tif(query == '' && this.history_search.length > 0){\r\n\t\t\t\t\tthis.search_list = []\r\n\t\t\t\t\tthis.isHistory=true\r\n\t\t\t\t\treturn \r\n\t\t\t\t}\r\n\t\t\t\t//防抖\r\n\t\t\t\tclearTimeout(this.time)\r\n\t\t\t\tthis.time = setTimeout(() => {\r\n\t\t\t\t\tthis.query = query\r\n\t\t\t\t\tthis.getSearchList(query)\r\n\t\t\t\t},'1000')\r\n\t\t\t},\r\n\t\t\t//点击事件\r\n\t\t\tclickInput(){\r\n\t\t\t\tthis.placeholder = ''\r\n\t\t\t\tthis.isEmpty = false\r\n\t\t\t\tthis.isHistory = false\r\n\t\t\t},\r\n\t\t\t//获取商品\r\n\t\t\tgetSearchList(query){\r\n\t\t\t\tapi.request('/goods/qsearch','GET',{\r\n\t\t\t\t\tquery:query\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.isHistory = false\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif(res.data.message != null && res.data.message != ''){\r\n\t\t\t\t\t\t\tthis.isSearchList = true\r\n\t\t\t\t\t\t\tthis.isEmpty = false\r\n\t\t\t\t\t\t\tthis.search_list = res.data.message\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.isEmpty = true\r\n\t\t\t\t\t\tthis.isSearchList = false\r\n\t\t\t\t\t\tconsole.log(this.search_list)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//删除搜索历史\r\n\t\t\tclearHistory(){\r\n\t\t\t\tDialog.confirm({\r\n\t\t\t\t  title: '',\r\n\t\t\t\t  message: '是否删除历史搜索',\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t    // on confirm\r\n\t\t\t\t\tthis.history_search = []\r\n\t\t\t\t\tthis.isHistory = false\r\n\t\t\t\t\tuni.removeStorage({\r\n\t\t\t\t\t\tkey:'history_search',\r\n\t\t\t\t\t})\r\n\t\t\t\t  }).catch(() => {\r\n\t\t\t\t    // on cancel\r\n\t\t\t\t  });\r\n\t\t\t},\r\n\t\t\t//商品详情页\r\n\t\t\tgoDetail(item){\r\n\t\t\t\tconsole.log(item)\r\n\t\t\t\tconsole.log((this.history_search))\r\n\t\t\t\tvar i = this.history_search.indexOf(this.query)\r\n\t\t\t\tconsole.log(i)\r\n\t\t\t\tif(i == -1){\r\n\t\t\t\t\tthis.history_search.push(this.query)\r\n\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\tkey:'history_search',\r\n\t\t\t\t\t\tdata:this.history_search\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}